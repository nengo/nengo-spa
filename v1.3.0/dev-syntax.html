
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Implementation of the SPA syntax &#8212; NengoSPA 1.3.0 docs</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,400i,600|Rajdhani:700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
<link rel="stylesheet" href="https://www.nengo.ai/css/bootstrap.css" type="text/css">
<style>
  body .title-bar,
  body .documentation-source h1:after {
    background-color: #d40000;
  }
</style>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GT8XEDLTMJ"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());
 gtag('config', 'G-GT8XEDLTMJ');
</script>
<!-- End Google tag (gtag.js) -->

<!-- Matomo -->
<script>
 var _paq = window._paq = window._paq || [];
 _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
 _paq.push(["setCookieDomain", "*.appliedbrainresearch.com"]);
 _paq.push(["setDomains", ["*.appliedbrainresearch.com","*.edge.nengo.ai","*.forum.nengo.ai","*.labs.nengo.ai","*.nengo.ai"]]);
 _paq.push(["enableCrossDomainLinking"]);
 _paq.push(["setDoNotTrack", true]);
 _paq.push(['trackPageView']);
 _paq.push(['enableLinkTracking']);
 (function() {
   var u="https://appliedbrainresearch.matomo.cloud/";
   _paq.push(['setTrackerUrl', u+'matomo.php']);
   _paq.push(['setSiteId', '3']);
   var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
   g.async=true; g.src='//cdn.matomo.cloud/appliedbrainresearch.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
 })();
</script>
<!-- End Matomo Code -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://unpkg.com/scrollreveal"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stickyfill/2.1.0/stickyfill.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
<!-- From basic/layout.html -->
<script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
  
  
<script src="_static/underscore.js"></script>
  
  
<script src="_static/doctools.js"></script>
  
  
<script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="NengoSPA license" href="license.html" />
    <link rel="prev" title="Contributing to NengoSPA" href="contributing.html" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

  </head><body class="bg-dark">

<header class="fixed-top header-top shadow-sm">
  <nav class="navbar navbar-expand-md navbar-light bg-white">
    <a class="navbar-brand" href="https://www.nengo.ai/">
      <img
        src="https://www.nengo.ai/design/_images/general-full-light.svg"
        alt="Nengo"
        class="logo"
      />
    </a>
    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbar-collapse"
      aria-controls="navbar-collapse"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbar-collapse">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="https://www.nengo.ai/">What is Nengo?</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://www.nengo.ai/examples/">Examples</a>
        </li>
        <li class="nav-item dropdown active">
          <a
            class="nav-link dropdown-toggle"
            id="navbar-dropdown-docs"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
            href="#"
            >Documentation</a
          >
          <div
            class="dropdown-menu shadow-lg border-0"
            aria-labelledby="navbar-dropdown-docs"
          >
            
            <a class="dropdown-item" href="https://www.nengo.ai/nengo/">Nengo core</a>
            <a class="dropdown-item" href="https://github.com/nengo/nengo-gui/">NengoGUI</a>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-dl/">NengoDL</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-spa/">NengoSPA</a>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-extras/">NengoExtras</a>
            <a class="dropdown-item" href="https://arvoelke.github.io/nengolib-docs/">Nengolib</a>
            <a class="dropdown-item" href="https://www.nengo.ai/keras-spiking">KerasSpiking</a>
            <a class="dropdown-item" href="https://www.nengo.ai/pytorch-spiking">PyTorchSpiking</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-fpga/">NengoFPGA</a>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-loihi/">NengoLoihi</a>
            <a class="dropdown-item" href="https://labs.nengo.ai/nengo-ocl/">NengoOCL</a>
            <a class="dropdown-item" href="https://github.com/project-rig/nengo_spinnaker">NengoSpiNNaker</a>
            <a class="dropdown-item" href="https://github.com/nengo-labs/nengo-mpi">NengoMPI</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/documentation/"
              >All documentation</a
            >
          </div>
        </li>
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            id="navbar-dropdown-community"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
            href="#"
            >Community</a
          >
          <div
            class="dropdown-menu shadow-lg border-0"
            aria-labelledby="navbar-dropdown-community"
          >
            <a class="dropdown-item" href="https://forum.nengo.ai">Forum</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/people/"
              >People</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/summer-school/"
              >Summer school</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/contributing/"
              >Contributing</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/publications/"
              >Publications</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/videos/"
              >Videos</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/conduct/"
              >Code of conduct</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/caa/">CAA</a>
          </div>
        </li>
        <li class="nav-item">
          <a
            class="nav-link btn btn-success btn-sm text-white"
            href="https://www.nengo.ai/getting-started/"
            >Getting started</a
          >
        </li>
      </ul>
    </div>
  </nav>
</header>
<div class="main-content gradient-top">
  <div class="container-fluid">
    <div class="row"><a class="toggle-sidenav d-block d-md-none" href="#"
  ><i class="icon-close fa fa-fw fa-arrow-left"></i
  ><i class="icon-open fa fa-fw fa-arrow-right"></i
></a>
<div role="complementary" class="sidenav col-4 col-xl-3 p-0 border-right">
  <h3 class="pt-5 px-5">
    <a href="index.html">
      <img
        class="img-fluid documentation-image"
        src="https://www.nengo.ai/design/_images/nengo-spa-full-light.svg"
        alt="NengoSPA"
      />
    </a>
  </h3>
<form class="px-5 py-3 my-0 border-bottom" action="search.html" method="get">
  <div class="form-group form-group-single">
    <input type="text" name="q" class="form-control" placeholder="Search" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
    <button type="submit" class="btn btn-link">
      <img src="https://www.nengo.ai/img/icon-search.svg" alt="Go" />
    </button>
  </div>
</form><div class="p-5 toctree">
  
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="developer.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="contributing.html">Contributing to NengoSPA</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Implementation of the SPA syntax</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#types">Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#actions-and-the-operator">Actions and the <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> operator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#application-of-the-operator-overloading-to-nengo-spa-network">Application of the operator overloading to <code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo_spa.Network</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="license.html">NengoSPA license</a></li>
</ul>
</li>
</ul>

  
  </div>
  
  <form class="p-5 my-0 border-top">
    <div class="form-group">
      <label class="text-gray">Version:</label>
      <select class="custom-select" onchange="switchVersion(this);">
        
        
        <option value="../dev-syntax.html">latest</option>
        
        
          
        <option selected>v1.3.0</option>
          
        
          
        <option value="../v1.2.0/dev-syntax.html">
          v1.2.0
        </option>
          
        
          
        <option value="../v1.1.1/dev-syntax.html">
          v1.1.1
        </option>
          
        
          
        <option value="../v1.1.0/dev-syntax.html">
          v1.1.0
        </option>
          
        
      </select>
    </div>
  </form>
  
</div>
      

      <div class="col-12 col-md-8 col-xl-9">
        <div class="container">
          <div class="row">
            <div class="col-10 offset-1 pb-5 documentation-source" role="main">
              
              
  <div class="section" id="implementation-of-the-spa-syntax">
<h1>Implementation of the SPA syntax<a class="headerlink" href="#implementation-of-the-spa-syntax" title="Permalink to this headline">¶</a></h1>
<p>The SPA syntax is implemented with Python operator overloading at its core.
There is a hierarchy of certain sets to consider in this.</p>
<ol class="arabic simple">
<li><p>An operation on two <a class="reference internal" href="modules/nengo_spa.semantic_pointer.html#nengo_spa.semantic_pointer.SemanticPointer" title="nengo_spa.semantic_pointer.SemanticPointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SemanticPointer</span></code></a> instances will always produce
another <a class="reference internal" href="modules/nengo_spa.semantic_pointer.html#nengo_spa.semantic_pointer.SemanticPointer" title="nengo_spa.semantic_pointer.SemanticPointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SemanticPointer</span></code></a> instance (or scalar in case of a dot product).
Thus, the set of <a class="reference internal" href="modules/nengo_spa.semantic_pointer.html#nengo_spa.semantic_pointer.SemanticPointer" title="nengo_spa.semantic_pointer.SemanticPointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SemanticPointer</span></code></a> is closed under most operations.</p></li>
<li><p>Next is the set of symbols created with <a class="reference internal" href="modules/nengo_spa.html#nengo_spa.sym" title="nengo_spa.sym"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo_spa.sym</span></code></a>.
These will be instances of <code class="xref py py-obj docutils literal notranslate"><span class="pre">PointerSymbol</span></code> and any operation on two of these
instance will give another <code class="xref py py-obj docutils literal notranslate"><span class="pre">PointerSymbol</span></code>.
For example, <code class="docutils literal notranslate"><span class="pre">PointerSymbol('A')</span> <span class="pre">*</span> <span class="pre">PointerSymbol('B')</span></code> will give
<code class="docutils literal notranslate"><span class="pre">PointerSymbol('A*B')</span></code>. In addition, some operations are defined between
<code class="xref py py-obj docutils literal notranslate"><span class="pre">FixedScalar</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">PointerSymbol</span></code>. When using a number in such an operation
it will be converted automatically to a <code class="xref py py-obj docutils literal notranslate"><span class="pre">FixedScalar</span></code> instance.</p></li>
<li><p>The final set are operations based on module outputs that will change over
the course of a simulation. All of these fall into the set of <code class="xref py py-obj docutils literal notranslate"><span class="pre">DynamicNode</span></code>
instances. The implementation of the operators for <code class="xref py py-obj docutils literal notranslate"><span class="pre">DynamicNode</span></code> is a little
bit more involved as the operands may not just be other <code class="xref py py-obj docutils literal notranslate"><span class="pre">DynamicNode</span></code>
instances, but also <code class="xref py py-obj docutils literal notranslate"><span class="pre">PointerSymbol</span></code> and <a class="reference internal" href="modules/nengo_spa.semantic_pointer.html#nengo_spa.semantic_pointer.SemanticPointer" title="nengo_spa.semantic_pointer.SemanticPointer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SemanticPointer</span></code></a> instances. The
result will usually be also a <code class="xref py py-obj docutils literal notranslate"><span class="pre">DynamicNode</span></code>, but certain specializations
exist. <code class="xref py py-obj docutils literal notranslate"><span class="pre">Summed</span></code> is used for the sum of multiple dynamic outputs,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Transformed</span></code> is used for a dynamic output to which a constant transformation
matrix is applied, and <code class="xref py py-obj docutils literal notranslate"><span class="pre">ModuleOutput</span></code> is the bare output of a SPA module.</p></li>
</ol>
<p>NengoSPA used to construct a complete abstract syntax tree (AST) before
constructing any network, but this has since been changed to greedily construct
networks as soon as all the required information has been obtained. For this
historical reason, most of the classes mentioned still live in <code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo_spa.ast</span></code>.
Furthermore, all of this classes derive from <code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo_spa.ast.base.Node</span></code> which
specifies the minimal interface of all these classes:</p>
<ul class="simple">
<li><p>A <em>type</em> attribute used to ensure type safety within
the SPA syntax and provides the type a node evaluates to (see below).</p></li>
<li><p>A <em>connect_to(sink, **kwargs)</em> method that creates all the network components
to implement the node and connects the output to the Nengo object <em>sink</em>.
The keyword arguments are to be passed to the <a class="reference external" href="https://www.nengo.ai/nengo/frontend-api.html#nengo.Connection" title="(in Nengo v3.2)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo.Connection</span></code></a>.</p></li>
<li><p>A <em>construct()</em> method that creates all the network components required to
implement the node and returns a Nengo object providing the output (instead
of connecting into a receiving Nengo object).</p></li>
</ul>
<p>For fixed values nodes of the type <code class="xref py py-obj docutils literal notranslate"><span class="pre">Fixed</span></code> are used that need to implement an
additional <em>evaluate()</em> method that evaluates the fixed expression and returns
the result.</p>
<div class="section" id="types">
<h2>Types<a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h2>
<p>Types in NengoSPA are defined by deriving from <code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo_spa.types.Type</span></code>. Two
types will be considered equal if their <em>name</em> attributes match (as long as
<em>__eq__</em> is not overwritten). For more complex relationships, the <em>__gt__</em>
method may be overwritten to specify a partial ordering. A call to
<code class="docutils literal notranslate"><span class="pre">a.__gt__(b)</span></code> should return <em>True</em>, if (and only if) <em>b</em> can be cast to the
type <em>a</em>. For example, the type for an unspecified vocabulary can be cast to
the type for a specific vocabulary.</p>
<p>Currently, the types <code class="xref py py-obj docutils literal notranslate"><span class="pre">TScalar</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">TAnyVocab</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">TAnyVocabOfDim</span></code>, and
<code class="xref py py-obj docutils literal notranslate"><span class="pre">TVocabulary</span></code> are defined, with partial ordering <code class="xref py py-obj docutils literal notranslate"><span class="pre">TScalar</span> <span class="pre">&lt;</span> <span class="pre">TAnyVocab</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">TAnyVocab</span> <span class="pre">&lt;</span> <span class="pre">TAnyVocabOfDim</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">TAnyVocab</span> <span class="pre">&lt;</span> <span class="pre">TVocabulary</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">TAnyVocabOfDim(vocab.dimensions)</span> <span class="pre">&lt;</span> <span class="pre">TVocabulary(vocab)</span></code>.</p>
<p>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo_spa.types.coerce_types</span></code> can be used to determine the smallest type
in the partial ordering enclosing all given types.</p>
</div>
<div class="section" id="actions-and-the-operator">
<h2>Actions and the <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> operator<a class="headerlink" href="#actions-and-the-operator" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> (right shift) operator for creating connections is also implemented
through operator overloading on the <code class="xref py py-obj docutils literal notranslate"><span class="pre">ModuleInput</span></code> class. Depending on the
context, it either creates the connection immediately or creates
a <code class="xref py py-obj docutils literal notranslate"><span class="pre">RoutedConnection</span></code> instance in the context of an <code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo_spa.Actions</span></code> object.
<code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo_spa.actions.ifmax</span></code> will then trigger the actual creation of the gated
connection with the appropriate gating.</p>
</div>
<div class="section" id="application-of-the-operator-overloading-to-nengo-spa-network">
<h2>Application of the operator overloading to <a class="reference internal" href="modules/nengo_spa.html#nengo_spa.Network" title="nengo_spa.Network"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo_spa.Network</span></code></a><a class="headerlink" href="#application-of-the-operator-overloading-to-nengo-spa-network" title="Permalink to this headline">¶</a></h2>
<p>So far the operator overloading has only been done on specific classes deriving
from <code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo_spa.ast.base.Node</span></code>. However, the operators need to work with SPA
networks. For this, <a class="reference internal" href="modules/nengo_spa.html#nengo_spa.Network" title="nengo_spa.Network"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo_spa.Network</span></code></a> derives from <code class="xref py py-obj docutils literal notranslate"><span class="pre">SpaOperatorMixin</span></code> which:</p>
<ol class="arabic simple">
<li><p>Defines the overloaded operators</p></li>
<li><p>Converts the operands to the appropriate
<code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo_spa.ast.base.Node</span></code> (or <code class="xref py py-obj docutils literal notranslate"><span class="pre">ModuleInput</span></code>) class</p></li>
<li><p>Delegates to the class’s implementation of the operator.</p></li>
</ol>
<p>Furthermore, the operators need to be overloaded for the input and outputs of
a SPA network. These will be basic Nengo objects and should continue to be
usable as such. Thus, the <a class="reference internal" href="modules/nengo_spa.html#nengo_spa.Network.declare_input" title="nengo_spa.Network.declare_input"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Network.declare_input</span></code></a> and
<a class="reference internal" href="modules/nengo_spa.html#nengo_spa.Network.declare_output" title="nengo_spa.Network.declare_output"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Network.declare_output</span></code></a> methods will dynamically insert <code class="xref py py-obj docutils literal notranslate"><span class="pre">SpaOperatorMixin</span></code>
into the inheritance list of a single instance. They also register the
associated vocabulary for the type checking.</p>
</div>
</div>


            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div><footer class="text-light footer-main gradient-bottom">
  <p class="small text-center mb-0">
    <a class="no-hover-line" href="https://appliedbrainresearch.com">
      <img
        src="https://appliedbrainresearch.com/img/logo-blue-notext.svg"
        height="48"
      />
    </a>
    <a href="https://www.nengo.ai/">What is Nengo?</a>
    <a href="https://www.nengo.ai/examples/">Examples</a>
    <a href="https://www.nengo.ai/documentation/">Documentation</a>
    <a href="https://www.nengo.ai/getting-started/">Getting started</a>
    <a href="https://www.nengo.ai/privacy/">Privacy</a>
  </p>
  <p class="small text-center mb-0">&copy; Applied Brain Research</p>
</footer>
<script>
  function switchVersion(select) {
    var option = select.selectedOptions[0];
    if (option.hasAttribute("value")) {
      window.location = option.value;
    }
  }
</script>

<script>
  var elements = document.querySelectorAll('.sidenav');
  Stickyfill.add(elements);
</script>
<script>
  ScrollReveal().reveal(".fade-in", {
      scale: 0.85,
      duration: 1000,
      delay: 250,
      interval: 50
  });
</script>
<script>
  $('a.toggle-sidenav').on('click', function(e) {
    e.preventDefault();
    if ( $(this).hasClass('active') ) {
      $(this).removeClass('active');
      $('.sidenav').removeClass('open');
    } else {
      $(this).addClass('active');
      $('.sidenav').addClass('open');
    }
  });
</script>
<script>
  var lists = document.querySelectorAll('.toctree ul');
  lists.forEach((ul) => {
      ul.classList.add("nav");
  });
  var links = document.querySelectorAll('.toctree a');
  links.forEach((link) => {
      link.classList.add("nav-link");
  });
  $("body").scrollspy({target: ".sidenav"});
</script>
  </body>
</html>